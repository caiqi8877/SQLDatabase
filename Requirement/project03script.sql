-- Generated by Oracle SQL Developer Data Modeler 3.1.4.710
--   at:        2013-04-20 20:32:25 EDT
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g

Drop table reservation;

DROP TABLE run;

DROP TABLE movie;


Drop table location;

DROP TABLE theaterchain;

DROP TABLE phone;

DROP TABLE minor;

Drop table adult;


DROP TABLE savercard;


Drop table Customer;



CREATE TABLE Adult 
    ( 
     AdultID CHAR (10)  NOT NULL , 
     Sex CHAR (1) 
    ) 
;



ALTER TABLE Adult 
    ADD CONSTRAINT Adult_PK PRIMARY KEY ( AdultID ) ;



CREATE TABLE Customer 
    ( 
     CustID CHAR (10)  NOT NULL , 
     FN VARCHAR2 (50) , 
     LN VARCHAR2 (50) , 
     Email VARCHAR2 (50) , 
     DOB DATE 
    ) 
;



ALTER TABLE Customer 
    ADD CONSTRAINT Customer_PK PRIMARY KEY ( CustID ) ;

ALTER TABLE Customer 
    ADD CONSTRAINT Customer_UQ UNIQUE ( Email ) ;


CREATE TABLE Location 
    ( 
     ZIP CHAR (10)  NOT NULL , 
     City VARCHAR2 (20) 
    ) 
;



ALTER TABLE Location 
    ADD CONSTRAINT Location_PK PRIMARY KEY ( ZIP ) ;



CREATE TABLE Minor 
    ( 
     MinorID CHAR (10)  NOT NULL , 
     Supervisor CHAR (10)  NOT NULL , 
     EndingDate DATE 
    ) 
;



ALTER TABLE Minor 
    ADD CONSTRAINT Minor_PK PRIMARY KEY ( MinorID ) ;



CREATE TABLE Movie 
    ( 
     MovieID CHAR (10)  NOT NULL , 
     Name VARCHAR2 (50)  NOT NULL , 
     Runtime CHAR (10)  NOT NULL 
    ) 
;



ALTER TABLE Movie 
    ADD CONSTRAINT Movie_PK PRIMARY KEY ( MovieID ) ;



CREATE TABLE Phone 
    ( 
     PhoneNumber CHAR (10)  NOT NULL , 
     CustID CHAR (10)  NOT NULL 
    ) 
;



ALTER TABLE Phone 
    ADD CONSTRAINT Phone_PK PRIMARY KEY ( PhoneNumber, CustID ) ;



CREATE TABLE Reservation 
    ( 
     MovieID CHAR (10)  NOT NULL , 
     ZIP CHAR (10)  NOT NULL , 
     TheaterChainId CHAR (10)  NOT NULL , 
     CustID CHAR (10)  NOT NULL , 
     ReservationDate DATE  NOT NULL , 
     TicketPrice FLOAT  NOT NULL , 
     NumberOfSeats SMALLINT  NOT NULL 
    ) 
;



ALTER TABLE Reservation 
    ADD CONSTRAINT Reservation_PK PRIMARY KEY ( MovieID, ZIP, TheaterChainId, CustID ) ;



CREATE TABLE Run 
    ( 
     MovieID CHAR (10)  NOT NULL , 
     ZIP CHAR (10)  NOT NULL , 
     TheaterChainId CHAR (10)  NOT NULL , 
     ShowDate DATE  NOT NULL , 
     OpenForReservation CHAR (1)  NOT NULL 
    ) 
;



ALTER TABLE Run 
    ADD CONSTRAINT Run_PK PRIMARY KEY ( MovieID, ZIP, TheaterChainId ) ;



CREATE TABLE SaverCard 
    ( 
     CustID CHAR (10)  NOT NULL , 
     SerialNo SMALLINT  NOT NULL , 
     ExpirationDate DATE  NOT NULL 
    ) 
;



ALTER TABLE SaverCard 
    ADD CONSTRAINT SaverCard_PK PRIMARY KEY ( CustID, SerialNo ) ;



CREATE TABLE TheaterChain 
    ( 
     TheaterChainId CHAR (10)  NOT NULL , 
     StockPrice FLOAT 
    ) 
;



ALTER TABLE TheaterChain 
    ADD CONSTRAINT TheaterChain_PK PRIMARY KEY ( TheaterChainId ) ;




ALTER TABLE Minor 
    ADD CONSTRAINT Adult_Minor_FK1 FOREIGN KEY 
    ( 
     Supervisor
    ) 
    REFERENCES Adult 
    ( 
     AdultID
    ) 
;


ALTER TABLE Adult 
    ADD CONSTRAINT Customer_Adult_FK1 FOREIGN KEY 
    ( 
     AdultID
    ) 
    REFERENCES Customer 
    ( 
     CustID
    ) 
;


ALTER TABLE Minor 
    ADD CONSTRAINT Customer_Minor_FK1 FOREIGN KEY 
    ( 
     MinorID
    ) 
    REFERENCES Customer 
    ( 
     CustID
    ) 
;


ALTER TABLE Phone 
    ADD CONSTRAINT Customer_Phone_FK1 FOREIGN KEY 
    ( 
     CustID
    ) 
    REFERENCES Customer 
    ( 
     CustID
    ) 
;


ALTER TABLE Reservation 
    ADD CONSTRAINT Customer_Reservation_FK1 FOREIGN KEY 
    ( 
     CustID
    ) 
    REFERENCES Customer 
    ( 
     CustID
    ) 
;


ALTER TABLE SaverCard 
    ADD CONSTRAINT Customer_SaverCard_FK1 FOREIGN KEY 
    ( 
     CustID
    ) 
    REFERENCES Customer 
    ( 
     CustID
    ) 
;


ALTER TABLE Run 
    ADD CONSTRAINT Location_Run_FK1 FOREIGN KEY 
    ( 
     ZIP
    ) 
    REFERENCES Location 
    ( 
     ZIP
    ) 
;


ALTER TABLE Run 
    ADD CONSTRAINT Movie_Run_FK1 FOREIGN KEY 
    ( 
     MovieID
    ) 
    REFERENCES Movie 
    ( 
     MovieID
    ) 
;


ALTER TABLE Reservation 
    ADD CONSTRAINT Run_Reservation_FK1 FOREIGN KEY 
    ( 
     MovieID,
     ZIP,
     TheaterChainId
    ) 
    REFERENCES Run 
    ( 
     MovieID,
     ZIP,
     TheaterChainId
    ) 
;


ALTER TABLE Run 
    ADD CONSTRAINT TheaterChain_Run_FK1 FOREIGN KEY 
    ( 
     TheaterChainId
    ) 
    REFERENCES TheaterChain 
    ( 
     TheaterChainId
    ) 
;


/* Insert into theaterchain*/
insert into theaterchain values ('1111',124.89);
insert into theaterchain values ('2222',1.3);
insert into theaterchain values ('3333',34.34);
insert into theaterchain values ('4444',25.43);

/* Insert into location*/
insert into location values ('10001','New York');
insert into location values ('07306','Jersey City');
insert into location values ('07304','North Bergen');
insert into location values ('15701','Indiana');
insert into location values ('94223','Los Angeles');
insert into location values ('55792','Virginia');

/* Insert into movie*/
insert into movie values ('123465','The Avengers','95');
insert into movie values ('989238','Skyfall','91');
insert into movie values ('347349','The Dark Knight Rises','96');

/* Insert into customer*/
insert into customer values ('1000','John','Mike','john.mike@gmail.com',TO_DATE('11/11/1988','MM/DD/YYYY'));
insert into customer values ('2000','Stella','Martin','alex.mar@gmail.com',TO_DATE('01/12/1985','MM/DD/YYYY'));
insert into customer values ('6000','Lily','Mike','l.mike@gmail.com',TO_DATE('11/11/1997','MM/DD/YYYY'));
insert into customer values ('7000','Steven','Martin','a.mar@gmail.com',TO_DATE('01/12/2000','MM/DD/YYYY'));
insert into customer values ('3000','Nick','Alex','nick_88@gmail.com',TO_DATE('03/15/1988','MM/DD/YYYY'));
insert into customer values ('4000','Sachin','Charles','sachin5@gmail.com',TO_DATE('06/16/1986','MM/DD/YYYY'));
insert into customer values ('5000','Jennifer','Lawrence','Jen_e@gmail.com',TO_DATE('08/19/1988','MM/DD/YYYY'));
insert into customer values ('8000','Chris','Alex','nick_89@gmail.com',TO_DATE('03/15/2000','MM/DD/YYYY'));
insert into customer values ('9000','Kaley','Charles','sachin1@gmail.com',TO_DATE('06/16/2001','MM/DD/YYYY'));

/* Insert into adult*/
insert into adult values ('1000','M');
insert into adult values ('2000','F');
insert into adult values ('3000','M');
insert into adult values ('4000','M');
insert into adult values ('5000','F');


/* Insert into minor*/
insert into minor values ('6000','1000',TO_DATE('06/15/2015','MM/DD/YYYY'));
insert into minor values ('7000','2000',TO_DATE('06/18/2016','MM/DD/YYYY'));
insert into minor values ('8000','3000',null);
insert into minor values ('9000','4000',null);

/* Insert into phone*/
insert into phone values ('1234567890','1000');
insert into phone values ('1234367893','2000');
insert into phone values ('1234567892','4000');
insert into phone values ('1234567893','5000');
insert into phone values ('1234567894','6000');
insert into phone values ('1234567894','7000');
insert into phone values ('1234567894','8000');
insert into phone values ('1234567894','9000');

/* Insert into savercard*/
insert into savercard values ('1000',1,TO_DATE('06/11/2015','MM/DD/YYYY'));
insert into savercard values ('1000',2,TO_DATE('06/11/2015','MM/DD/YYYY'));
insert into savercard values ('2000',1,TO_DATE('07/11/2015','MM/DD/YYYY'));
insert into savercard values ('2000',2,TO_DATE('08/11/2015','MM/DD/YYYY'));
insert into savercard values ('3000',1,TO_DATE('02/11/2015','MM/DD/YYYY'));
insert into savercard values ('4000',2,TO_DATE('01/11/2015','MM/DD/YYYY'));

/* Insert into run*/
insert into run values ('123465','10001','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('989238','10001','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('347349','10001','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('123465','07306','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('989238','07306','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('347349','07306','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('123465','07304','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('989238','07304','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('123465','94223','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('989238','94223','1111',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('347349','94223','1111',TO_DATE('05/02/2013','MM/DD/YYYY'),'Y');
insert into run values ('347349','94223','2222',TO_DATE('05/02/2013','MM/DD/YYYY'),'Y');
insert into run values ('123465','94223','3333',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('989238','94223','3333',TO_DATE('05/01/2013','MM/DD/YYYY'),'Y');
insert into run values ('347349','94223','3333',TO_DATE('05/02/2013','MM/DD/YYYY'),'Y');


/* Insert into reservation*/
insert into reservation values ('989238','10001','1111','2000',TO_DATE('04/01/2013','MM/DD/YYYY'),12.3,1);
insert into reservation values ('123465','07306','1111','1000',TO_DATE('04/01/2013','MM/DD/YYYY'),12.3,1);
insert into reservation values ('123465','10001','1111','1000',TO_DATE('04/01/2013','MM/DD/YYYY'),12.3,1);
insert into reservation values ('989238','10001','1111','1000',TO_DATE('04/01/2013','MM/DD/YYYY'),12.3,1);
insert into reservation values ('123465','07306','1111','3000',TO_DATE('04/01/2013','MM/DD/YYYY'),12.3,5);
insert into reservation values ('123465','10001','1111','5000',TO_DATE('04/01/2013','MM/DD/YYYY'),12.3,6);
insert into reservation values ('989238','10001','1111','7000',TO_DATE('04/01/2013','MM/DD/YYYY'),12.3,7);
insert into reservation values ('123465','07304','1111','4000',TO_DATE('04/01/2013','MM/DD/YYYY'),11.2,1);
insert into reservation values ('989238','07304','1111','4000',TO_DATE('04/01/2013','MM/DD/YYYY'),10,4);
insert into reservation values ('123465','94223','1111','4000',TO_DATE('04/01/2013','MM/DD/YYYY'),12.3,5);
insert into reservation values ('989238','94223','1111','4000',TO_DATE('04/01/2013','MM/DD/YYYY'),18,1);
insert into reservation values ('347349','94223','1111','4000',TO_DATE('04/02/2013','MM/DD/YYYY'),19,4);
insert into reservation values ('347349','94223','1111','5000',TO_DATE('04/02/2013','MM/DD/YYYY'),20,4);
insert into reservation values ('347349','94223','1111','6000',TO_DATE('04/03/2013','MM/DD/YYYY'),11,4);


-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            10
-- CREATE INDEX                             0
-- ALTER TABLE                             20
-- CREATE VIEW                              0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE STRUCTURED TYPE                   0
-- CREATE COLLECTION TYPE                   0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
